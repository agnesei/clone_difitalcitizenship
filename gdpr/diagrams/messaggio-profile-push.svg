<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="999px" preserveAspectRatio="none" style="width:619px;height:999px;" version="1.1" viewBox="0 0 619 999" width="619px" zoomAndPan="magnify"><defs/><g><!--cluster Ente Erogatore--><rect fill="#FFFFFF" height="99" style="stroke: #000000; stroke-width: 1.5;" width="134" x="374" y="16"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="390" y="36.7803">Ente Erogatore</text><!--cluster Cittadinanza Digitale--><rect fill="#FFFFFF" height="326" style="stroke: #000000; stroke-width: 1.5;" width="594" x="14" y="177"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="240" y="197.7803">Cittadinanza Digitale</text><!--cluster Servizio notifiche push--><path d="M398,572 C398,569 400,567 403,567 C406,567 408,569 408,572 C408,569 410,567 413,567 C416,567 418,569 418,572 C418,569 420,567 423,567 C426,567 428,569 428,572 C428,569 430,567 433,567 C436,567 438,569 438,572 C438,569 440,567 443,567 C446,567 448,569 448,572 C448,569 450,567 453,567 C456,567 458,569 458,572 C458,569 460,567 463,567 C466,567 468,569 468,572 C468,569 470,567 473,567 C476,567 478,569 478,572 C478,569 480,567 483,567 C486,567 488,569 488,572 C488,569 490,567 493,567 C496,567 498,569 498,572 C498,569 500,567 503,567 C506,567 508,569 508,572 C508,569 510,567 513,567 C516,567 518,569 518,572 C518,569 520,567 523,567 C526,567 528,569 528,572 C528,569 530,567 533,567 C536,567 538,569 538,572 C538,569 540,567 543,567 C546,567 548,569 548,572 C548,569 550,567 553,567 C556,567 558,569 558,572 C558,569 560,567 563,567 C566,567 568,569 568,572 C568,569 570,567 573,567 C576,567 578,569 578,572 C578,569 580,567 583,567 C586,567 588,569 588,572 C591,572 593,574 593,577 C593,580 591,582 588,582 C591,582 593,584 593,587 C593,590 591,592 588,592 C591,592 593,594 593,597 C593,600 591,602 588,602 C591,602 593,604 593,607 C593,610 591,612 588,612 C591,612 593,614 593,617 C593,620 591,622 588,622 C591,622 593,624 593,627 C593,630 591,632 588,632 C591,632 593,634 593,637 C593,640 591,642 588,642 C591,642 593,644 593,647 C593,650 591,652 588,652 C588,655 585,657 583,657 C580,657 578,655 578,652 C578,655 575,657 573,657 C570,657 568,655 568,652 C568,655 565,657 563,657 C560,657 558,655 558,652 C558,655 555,657 553,657 C550,657 548,655 548,652 C548,655 545,657 543,657 C540,657 538,655 538,652 C538,655 535,657 533,657 C530,657 528,655 528,652 C528,655 525,657 523,657 C520,657 518,655 518,652 C518,655 515,657 513,657 C510,657 508,655 508,652 C508,655 505,657 503,657 C500,657 498,655 498,652 C498,655 495,657 493,657 C490,657 488,655 488,652 C488,655 485,657 483,657 C480,657 478,655 478,652 C478,655 475,657 473,657 C470,657 468,655 468,652 C468,655 465,657 463,657 C460,657 458,655 458,652 C458,655 455,657 453,657 C450,657 448,655 448,652 C448,655 445,657 443,657 C440,657 438,655 438,652 C438,655 435,657 433,657 C430,657 428,655 428,652 C428,655 425,657 423,657 C420,657 418,655 418,652 C418,655 415,657 413,657 C410,657 408,655 408,652 C408,655 405,657 403,657 C400,657 398,655 398,652 C395,652 393,650 393,647 C393,644 395,642 398,642 C395,642 393,640 393,637 C393,634 395,632 398,632 C395,632 393,630 393,627 C393,624 395,622 398,622 C395,622 393,620 393,617 C393,614 395,612 398,612 C395,612 393,610 393,607 C393,604 395,602 398,602 C395,602 393,600 393,597 C393,594 395,592 398,592 C395,592 393,590 393,587 C393,584 395,582 398,582 C395,582 393,580 393,577 C393,574 395,572 398,572 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="158" x="411" y="596.7803">Servizio notifiche push</text><!--entity ente--><rect fill="#FEFECE" height="50" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="398" y="57"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="416" y="85.7803">Servizio</text><!--entity apimessaggi--><rect fill="#FEFECE" height="50" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="379.5" y="218"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="397.5" y="246.7803">API Messaggi</text><!--entity dbmessaggi--><path d="M163.5,446 C163.5,436 212,436 212,436 C212,436 260.5,436 260.5,446 L260.5,485 C260.5,495 212,495 212,495 C212,495 163.5,495 163.5,485 L163.5,446 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M163.5,446 C163.5,456 212,456 212,456 C212,456 260.5,456 260.5,446 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="181.5" y="478.7803">Messaggi</text><!--entity apipreferenze--><rect fill="#FEFECE" height="50" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="22" y="218"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="40" y="246.7803">API Preferenze</text><!--entity dbpreferenze--><path d="M22,446 C22,436 75,436 75,436 C75,436 128,436 128,446 L128,485 C128,495 75,495 75,495 C75,495 22,495 22,485 L22,446 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M22,446 C22,456 75,456 75,456 C75,456 128,456 128,446 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="40" y="478.7803">Preferenze</text><!--entity backend--><rect fill="#FEFECE" height="50" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="361" y="440.5"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="379" y="469.2803">Backend APP</text><!--entity apinotifiche--><rect fill="#FEFECE" height="50" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="413" y="606"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="431" y="634.7803">API notifiche push</text><!--entity cittadino--><ellipse cx="363" cy="914" fill="#FEFECE" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M363,922 L363,949 M350,930 L376,930 M363,949 L350,964 M363,949 L376,964 " fill="#FEFECE" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="335" y="985.7803">Cittadino</text><!--entity app--><rect fill="#FEFECE" height="50" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="319.5" y="762"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="337.5" y="790.7803">APP CD</text><!--link ente to apimessaggi--><path d="M441,107.1562 C441,135.665 441,182.1227 441,212.6277 " fill="none" id="ente-apimessaggi" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="441,217.7553,445,208.7553,441,212.7553,437,208.7553,441,217.7553" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="450" y="156.7803">(1) CF, messaggio</text><!--link apipreferenze to dbpreferenze--><path d="M71.5553,272.9215 C63.6398,289.021 55.0119,309.5235 51,329 C43.4513,365.6461 53.9282,408.1362 63.3175,435.8497 " fill="none" id="apipreferenze-dbpreferenze" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="73.9831,268.0724,66.3772,274.3294,71.7447,272.5434,73.5307,277.9109,73.9831,268.0724" style="stroke: #A80036; stroke-width: 1.0;"/><!--link apipreferenze to apimessaggi--><path d="M154.3966,243 C217.2386,243 311.0856,243 374.0944,243 " fill="none" id="apipreferenze-apimessaggi" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="379.3339,243,370.3339,239,374.3339,243,370.3339,247,379.3339,243" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="173" x="180.25" y="213.7803">(2) email, casella messaggi</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="222.75" y="227.7803">notifiche push</text><!--link apimessaggi to dbmessaggi--><path d="M379.3028,252.6702 C303.0702,266.0246 180.0837,292.6471 153,329 C129.5295,360.5031 154.8068,402.783 179.1725,431.8974 " fill="none" id="apimessaggi-dbmessaggi" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="182.4444,435.7371,179.6516,426.2925,179.2014,431.9314,173.5625,431.4813,182.4444,435.7371" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="162" y="348.7803">(3) messaggio,</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="184" y="362.7803">mittente</text><!--link apimessaggi to backend--><path d="M379.3785,258.9807 C343.9141,271.6867 302.2785,293.4053 281,329 C254.4957,373.3364 308.8372,413.0332 357.5627,438.0357 " fill="none" id="apimessaggi-backend" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="362.2576,440.4091,356.0302,432.7789,357.7954,438.1533,352.421,439.9185,362.2576,440.4091" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="290" y="348.7803">(4) CF, messaggio,</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="325.5" y="362.7803">mittente</text><!--link apimessaggi to backend--><path d="M438.8574,268.0911 C435.3508,309.1547 428.3984,390.5709 424.6098,434.9376 " fill="none" id="apimessaggi-backend" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="424.1639,440.1592,428.9152,431.5322,424.5893,435.1773,420.9442,430.8515,424.1639,440.1592" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="442" y="348.7803">(7) messaggio,</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="464" y="362.7803">mittente</text><!--link backend to apinotifiche--><path d="M432.024,490.6359 C443.8333,520.2486 463.4358,569.4033 476.031,600.9868 " fill="none" id="backend-apinotifiche" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="477.99,605.8992,478.3717,596.0577,476.1379,601.2549,470.9408,599.0211,477.99,605.8992" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="465" y="544.7803">(5) SHA256(CF)</text><!--link apinotifiche to app--><path d="M467.9166,656.0641 C445.6837,683.8108 409.8919,728.4789 386.4063,757.7889 " fill="none" id="apinotifiche-app" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="383.0336,761.9981,391.7829,757.476,386.1602,758.0962,385.5399,752.4735,383.0336,761.9981" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="449" y="705.7803">(6) ci sono nuovi</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="471" y="719.7803">messaggi</text><!--link backend to app--><path d="M393.9051,490.712 C375.5179,509.2042 353.095,536.0504 343,565 C320.1183,630.6179 339.1802,713.4172 352.6,757.004 " fill="none" id="backend-app" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="354.1238,761.8655,355.2489,752.0811,352.6284,757.0944,347.6151,754.4738,354.1238,761.8655" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="18" x="352" y="634.7803">(7)</text><!--link app to cittadino--><path d="M363,812.1886 C363,835.1257 363,869.7148 363,898.5641 " fill="none" id="app-cittadino" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="363,903.8799,367,894.8799,363,898.8799,359,894.8799,363,903.8799" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="18" x="372" y="861.7803">(8)</text><!--
@startuml
skinparamlocked shadowing false
skinparamlocked DefaultFontName Helvetica
skinparamlocked DefaultFontSize 14
skinparamlocked Padding 8

:Cittadino: as cittadino

agent "APP CD" as app

rectangle "Ente Erogatore" {
  agent "Servizio" as ente
}

rectangle "Cittadinanza Digitale" {
  agent "API Messaggi" as apimessaggi
  database "Messaggi" as dbmessaggi
  agent "API Preferenze" as apipreferenze
  database "Preferenze" as dbpreferenze
  agent "Backend APP" as backend
}

cloud "Servizio notifiche push" {
  agent "API notifiche push" as apinotifiche
}

ente -down-> apimessaggi : (1) CF, messaggio

dbpreferenze -up-> apipreferenze
apipreferenze -> apimessaggi : (2) email, casella messaggi\nnotifiche push

apimessaggi -down-> dbmessaggi : (3) messaggio,\nmittente

apimessaggi - -> backend : (4) CF, messaggio,\nmittente

backend -down-> apinotifiche : "(5) SHA256(CF)"

apinotifiche -down-> app : "(6) ci sono nuovi\nmessaggi"

backend -> app : "(7)  "

apimessaggi -> backend : "(7) messaggio,\nmittente"

app -down-> cittadino : "(8)"

@enduml

PlantUML version 1.2018.00(Thu Jan 04 20:42:56 CET 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_66-b17
Operating System: Mac OS X
OS Version: 10.13.4
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>