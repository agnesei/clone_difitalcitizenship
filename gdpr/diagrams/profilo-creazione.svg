<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="503px" preserveAspectRatio="none" style="width:984px;height:503px;" version="1.1" viewBox="0 0 984 503" width="984px" zoomAndPan="magnify"><defs/><g><!--cluster Cittadinanza Digitale--><rect fill="#FFFFFF" height="361.5" style="stroke: #000000; stroke-width: 1.5;" width="289" x="477" y="130.5"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="550.5" y="151.2803">Cittadinanza Digitale</text><!--cluster Servizio notifiche push--><path d="M777,137.5 C777,134.5 779,132.5 782,132.5 C785,132.5 787,134.5 787,137.5 C787,134.5 789,132.5 792,132.5 C795,132.5 797,134.5 797,137.5 C797,134.5 799,132.5 802,132.5 C805,132.5 807,134.5 807,137.5 C807,134.5 809,132.5 812,132.5 C815,132.5 817,134.5 817,137.5 C817,134.5 819,132.5 822,132.5 C825,132.5 827,134.5 827,137.5 C827,134.5 829,132.5 832,132.5 C835,132.5 837,134.5 837,137.5 C837,134.5 839,132.5 842,132.5 C845,132.5 847,134.5 847,137.5 C847,134.5 849,132.5 852,132.5 C855,132.5 857,134.5 857,137.5 C857,134.5 859,132.5 862,132.5 C865,132.5 867,134.5 867,137.5 C867,134.5 869,132.5 872,132.5 C875,132.5 877,134.5 877,137.5 C877,134.5 879,132.5 882,132.5 C885,132.5 887,134.5 887,137.5 C887,134.5 889,132.5 892,132.5 C895,132.5 897,134.5 897,137.5 C897,134.5 899,132.5 902,132.5 C905,132.5 907,134.5 907,137.5 C907,134.5 909,132.5 912,132.5 C915,132.5 917,134.5 917,137.5 C917,134.5 919,132.5 922,132.5 C925,132.5 927,134.5 927,137.5 C927,134.5 929,132.5 932,132.5 C935,132.5 937,134.5 937,137.5 C937,134.5 939,132.5 942,132.5 C945,132.5 947,134.5 947,137.5 C947,134.5 949,132.5 952,132.5 C955,132.5 957,134.5 957,137.5 C957,134.5 959,132.5 962,132.5 C965,132.5 967,134.5 967,137.5 C970,137.5 972,139.5 972,142.5 C972,145.5 970,147.5 967,147.5 C970,147.5 972,149.5 972,152.5 C972,155.5 970,157.5 967,157.5 C970,157.5 972,159.5 972,162.5 C972,165.5 970,167.5 967,167.5 C970,167.5 972,169.5 972,172.5 C972,175.5 970,177.5 967,177.5 C970,177.5 972,179.5 972,182.5 C972,185.5 970,187.5 967,187.5 C970,187.5 972,189.5 972,192.5 C972,195.5 970,197.5 967,197.5 C970,197.5 972,199.5 972,202.5 C972,205.5 970,207.5 967,207.5 C970,207.5 972,209.5 972,212.5 C972,215.5 970,217.5 967,217.5 C967,220.5 964,222.5 962,222.5 C959,222.5 957,220.5 957,217.5 C957,220.5 954,222.5 952,222.5 C949,222.5 947,220.5 947,217.5 C947,220.5 944,222.5 942,222.5 C939,222.5 937,220.5 937,217.5 C937,220.5 934,222.5 932,222.5 C929,222.5 927,220.5 927,217.5 C927,220.5 924,222.5 922,222.5 C919,222.5 917,220.5 917,217.5 C917,220.5 914,222.5 912,222.5 C909,222.5 907,220.5 907,217.5 C907,220.5 904,222.5 902,222.5 C899,222.5 897,220.5 897,217.5 C897,220.5 894,222.5 892,222.5 C889,222.5 887,220.5 887,217.5 C887,220.5 884,222.5 882,222.5 C879,222.5 877,220.5 877,217.5 C877,220.5 874,222.5 872,222.5 C869,222.5 867,220.5 867,217.5 C867,220.5 864,222.5 862,222.5 C859,222.5 857,220.5 857,217.5 C857,220.5 854,222.5 852,222.5 C849,222.5 847,220.5 847,217.5 C847,220.5 844,222.5 842,222.5 C839,222.5 837,220.5 837,217.5 C837,220.5 834,222.5 832,222.5 C829,222.5 827,220.5 827,217.5 C827,220.5 824,222.5 822,222.5 C819,222.5 817,220.5 817,217.5 C817,220.5 814,222.5 812,222.5 C809,222.5 807,220.5 807,217.5 C807,220.5 804,222.5 802,222.5 C799,222.5 797,220.5 797,217.5 C797,220.5 794,222.5 792,222.5 C789,222.5 787,220.5 787,217.5 C787,220.5 784,222.5 782,222.5 C779,222.5 777,220.5 777,217.5 C774,217.5 772,215.5 772,212.5 C772,209.5 774,207.5 777,207.5 C774,207.5 772,205.5 772,202.5 C772,199.5 774,197.5 777,197.5 C774,197.5 772,195.5 772,192.5 C772,189.5 774,187.5 777,187.5 C774,187.5 772,185.5 772,182.5 C772,179.5 774,177.5 777,177.5 C774,177.5 772,175.5 772,172.5 C772,169.5 774,167.5 777,167.5 C774,167.5 772,165.5 772,162.5 C772,159.5 774,157.5 777,157.5 C774,157.5 772,155.5 772,152.5 C772,149.5 774,147.5 777,147.5 C774,147.5 772,145.5 772,142.5 C772,139.5 774,137.5 777,137.5 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="158" x="790" y="162.2803">Servizio notifiche push</text><!--entity backend--><rect fill="#FEFECE" height="50" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="500.5" y="171.5"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="518.5" y="200.2803">Backend CD</text><!--entity apipreferenze--><rect fill="#FEFECE" height="50" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="485" y="429.5"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="503" y="458.2803">API Preferenze</text><!--entity dbpreferenze--><path d="M652,435 C652,425 705,425 705,425 C705,425 758,425 758,435 L758,474 C758,484 705,484 705,484 C705,484 652,484 652,474 L652,435 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M652,435 C652,445 705,445 705,445 C705,445 758,445 758,435 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="670" y="467.7803">Preferenze</text><!--entity apinotifiche--><rect fill="#FEFECE" height="50" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="782" y="171.5"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="800" y="200.2803">API notifiche push</text><!--entity cittadino--><ellipse cx="42" cy="160" fill="#FEFECE" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M42,168 L42,195 M29,176 L55,176 M42,195 L29,210 M42,195 L55,210 " fill="#FEFECE" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="14" y="231.7803">Cittadino</text><!--entity idp--><rect fill="#FEFECE" height="50" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="240.5" y="8"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="258.5" y="36.7803">IdP SPID</text><!--entity app--><rect fill="#FEFECE" height="50" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="244.5" y="171.5"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="262.5" y="200.2803">App CD</text><!--link cittadino to app--><path d="M78.1506,196.5 C120.7886,196.5 191.8236,196.5 239.0334,196.5 " fill="none" id="cittadino-app" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="244.0965,196.5,235.0965,192.5,239.0965,196.5,235.0965,200.5,244.0965,196.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="104.25" y="181.2803">(1) primo accesso</text><!--link idp to app--><path d="M287,63.4101 C287,94.498 287,142.2261 287,171.2828 " fill="none" id="idp-app" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="287,58.1886,283,67.1886,287,63.1886,291,67.1886,287,58.1886" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="150" x="296" y="107.7803">(2) autenticazione SPID</text><!--link idp to cittadino--><path d="M235.344,44.8016 C204.6502,53.456 165.9905,67.346 136,88 C111.9844,104.5392 90.2861,128.6237 73.8032,149.902 " fill="none" id="idp-cittadino" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="240.1992,43.4574,230.4582,42.0039,235.3805,44.7915,232.5928,49.7138,240.1992,43.4574" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="145" y="107.7803">(2) email, password</text><!--link idp to backend--><path d="M333.7236,40.3778 C371.0329,47.8983 423.4325,62.2312 463,88 C494.7321,108.6659 522.1298,142.7861 539.2381,167.2486 " fill="none" id="idp-backend" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="542.1028,171.3927,540.2754,161.7149,539.2596,167.2798,533.6947,166.264,542.1028,171.3927" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="194" x="508" y="107.7803">(3) CF, nome, cognome, email</text><!--link backend to apipreferenze--><path d="M557.3161,221.7079 C556.0223,269.3938 553.2213,372.6278 551.8254,424.0766 " fill="none" id="backend-apipreferenze" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="551.6867,429.1898,555.9295,420.3017,551.8224,424.1916,547.9325,420.0845,551.6867,429.1898" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="587.5" y="323.7803">(4) CF, email,</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="134" x="564" y="337.7803">casella messaggi=SI,</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="576.5" y="351.7803">notifiche push=SI</text><!--link apipreferenze to dbpreferenze--><path d="M617.1719,454.5 C627.0077,454.5 636.8435,454.5 646.6793,454.5 " fill="none" id="apipreferenze-dbpreferenze" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="651.8228,454.5,642.8228,450.5,646.8228,454.5,642.8228,458.5,651.8228,454.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--link app to backend--><path d="M329.6419,196.5 C374.1713,196.5 444.4804,196.5 495.3257,196.5 " fill="none" id="app-backend" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="500.4936,196.5,491.4936,192.5,495.4936,196.5,491.4936,200.5,500.4936,196.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="356" y="181.2803">(5) ID installazione</text><!--link backend to apinotifiche--><path d="M615.6502,196.5 C661.4242,196.5 725.9544,196.5 776.7736,196.5 " fill="none" id="backend-apinotifiche" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="781.9597,196.5,772.9597,192.5,776.9597,196.5,772.9597,200.5,781.9597,196.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="645.25" y="219.2803">(5) SHA256(CF),</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="650.75" y="233.2803">ID installazione</text><!--
@startuml
skinparamlocked shadowing false
skinparamlocked DefaultFontName Helvetica
skinparamlocked DefaultFontSize 14
skinparamlocked Padding 8

:Cittadino: as cittadino

agent "IdP SPID" as idp

agent "App CD" as app

rectangle "Cittadinanza Digitale" {
  agent "Backend CD" as backend

  agent "API Preferenze" as apipreferenze

  database "Preferenze" as dbpreferenze
}

cloud "Servizio notifiche push" {
  agent "API notifiche push" as apinotifiche
}

cittadino -> app : (1) primo accesso

app .up.> idp : (2) autenticazione SPID

cittadino -up-> idp : (2) email, password

idp -> backend : (3) CF, nome, cognome, email

backend -down-> apipreferenze : (4) CF, email,\ncasella messaggi=SI,\nnotifiche push=SI

apipreferenze -right-> dbpreferenze

app -> backend : (5) ID installazione

backend -right-> apinotifiche : (5) SHA256(CF),\nID installazione

@enduml

PlantUML version 1.2018.00(Thu Jan 04 20:42:56 CET 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_66-b17
Operating System: Mac OS X
OS Version: 10.13.4
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>